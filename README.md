# Subtitle to Text+

DaVinci Resolve の字幕トラックの内容を、個別の Text+ クリップに変換してビデオトラックへ自動的に配置するスクリプトです。

## 主な機能

- **個別クリップ挿入**: 字幕クリップ1つにつき、1つの Text+ クリップを生成します。
- **完璧なタイミング同期**: 字幕の開始時間とデュレーションをそのまま引き継ぎます。
- **マーカーベースのスタイル管理**: マーカー名で「対象トラック」と「使用するテンプレート」を指定できます。
- **自動上書き機能**: 既に Text+ が配置されている範囲を自動的にクリーニングしてから再配置するため、何度でもやり直しが可能です。
- **モジュール構造**: 高い保守性を備え、将来の拡張にも対応したプロフェッショナルな設計。

## インストール方法

DaVinci Resolve のスクリプトフォルダに `subtitle-to-text-plus.lua` をコピーしてください。一般的なパスは以下の通りです：

- **Windows**:
  `%AppData%\Blackmagic Design\DaVinci Resolve\Support\Fusion\Scripts\Comp`
- **macOS**:
  `/Users/[ユーザー名]/Library/Application Support/Blackmagic Design/DaVinci Resolve/Fusion/Scripts/Comp`

配置後、DaVinci Resolve のメニュー [Workspace] -> [Scripts] -> [Comp] 内に表示されるようになります。

## 使い方

### 1. トラックの準備
変換したいビデオトラックと字幕トラックの名前に `::` プレフィックスを付けます。
- 例: ビデオトラック `::Main` と 字幕トラック `::Main`

### 2. マーカーの配置
ビデオトラック（またはマーカーを表示しているトラック）に、変換対象範囲をカバーするマーカーを配置します。
マーカーの命名規則は以下の通りです：
`::[トラック名の一部]-[テンプレート名]`
- 例: `::Main-SubtitleStyleA`
    - これにより、`::Main` トラックの字幕を、メディアプールの `SubtitleStyleA` という名前のクリップを使って変換します。

### 3. テンプレートの準備
メディアプールに、手順2で指定したテンプレート名（例: `SubtitleStyleA`）の Text+ クリップを用意します。

### 4. スクリプトの実行
DaVinci Resolve のメニューまたはコンソールからスクリプトを実行します。

## ログ出力
実行時の詳細はコンソールに出力されます。うまく動作しない場合は、スクリプト先頭の `Config.DEBUG` を `true` に書き換えることで詳細な診断ログを確認できます。

## ライセンス
[LICENSE](LICENSE) ファイルを参照してください。
